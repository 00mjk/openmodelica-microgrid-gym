

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>omg.auxiliaries.inverter_controllers &mdash; OpenModelica Microgrid 2020 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="omg.auxiliaries.filter" href="omg.auxiliaries.filter.html" />
    <link rel="prev" title="omg.auxiliaries.base" href="omg.auxiliaries.base.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> OpenModelica Microgrid
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Guide:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../parts/user_guide/user_guide.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/user_guide/OpenModelica.html">OpenModelica</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/user_guide/fmu.html">Functional Mock-up Unit (FMU)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/user_guide/Pythoncode.html">Installation and General Remarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/user_guide/examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/user_guide/controller_tuning.html">Controller Tuning Hints</a></li>
</ul>
<p class="caption"><span class="caption-text">API:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="omg.html">omg</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="omg.agents.html">omg.agents</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="omg.auxiliaries.html">omg.auxiliaries</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="omg.auxiliaries.base.html">omg.auxiliaries.base</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">omg.auxiliaries.inverter_controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="omg.auxiliaries.filter.html">omg.auxiliaries.filter</a></li>
<li class="toctree-l3"><a class="reference internal" href="omg.auxiliaries.params.html">omg.auxiliaries.params</a></li>
<li class="toctree-l3"><a class="reference internal" href="omg.auxiliaries.pi_controllers.html">omg.auxiliaries.pi_controllers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="omg.common.html">omg.common</a></li>
<li class="toctree-l2"><a class="reference internal" href="omg.env.html">omg.env</a></li>
<li class="toctree-l2"><a class="reference internal" href="omg.execution.html">omg.execution</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">OpenModelica Microgrid</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="omg.html">omg</a> &raquo;</li>
        
          <li><a href="omg.auxiliaries.html">omg.auxiliaries</a> &raquo;</li>
        
      <li>omg.auxiliaries.inverter_controllers</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/omg.auxiliaries.inverter_controllers.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-openmodelica_microgrid_gym.auxiliaries.inverter_contollers">
<span id="omg-auxiliaries-inverter-controllers"></span><h1>omg.auxiliaries.inverter_controllers<a class="headerlink" href="#module-openmodelica_microgrid_gym.auxiliaries.inverter_contollers" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.Controller">
<em class="property">class </em><code class="sig-prename descclassname">openmodelica_microgrid_gym.auxiliaries.inverter_contollers.</code><code class="sig-name descname">Controller</code><span class="sig-paren">(</span><em class="sig-param">IPIParams</em>, <em class="sig-param">tau</em>, <em class="sig-param">undersampling=1</em>, <em class="sig-param">history=&lt;openmodelica_microgrid_gym.env.recorder.SingleHistory object&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/openmodelica_microgrid_gym/auxiliaries/inverter_contollers.html#Controller"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.Controller" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base class for all voltage and current controllers</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>IPIParams</strong> (<a class="reference internal" href="omg.auxiliaries.params.html#openmodelica_microgrid_gym.auxiliaries.params.PI_params" title="openmodelica_microgrid_gym.auxiliaries.params.PI_params"><code class="xref py py-class docutils literal notranslate"><span class="pre">PI_params</span></code></a>) – PI parameters for the current control loop</p></li>
<li><p><strong>tau</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – positive float. absolute sampling time for the controller</p></li>
<li><p><strong>undersampling</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – reduces the actual sampling time of the controller,
for example if set to 10, the controller will only calculate
the setpoint every 10th controller call</p></li>
<li><p><strong>history</strong> (<a class="reference internal" href="omg.env.recorder.html#openmodelica_microgrid_gym.env.recorder.EmptyHistory" title="openmodelica_microgrid_gym.env.recorder.EmptyHistory"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmptyHistory</span></code></a>) – Dataframe to store internal data</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.Controller.control">
<code class="sig-name descname">control</code><span class="sig-paren">(</span><em class="sig-param">currentCV</em>, <em class="sig-param">voltageCV</em>, <em class="sig-param">idq0SP=None</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/openmodelica_microgrid_gym/auxiliaries/inverter_contollers.html#Controller.control"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.Controller.control" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs the calculations for a discrete step of the controller</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>currentCV</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 1d-array with 3 entries, one for each phase. The feedback values for current</p></li>
<li><p><strong>voltageCV</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 1d-array with 3 entries, one for each phase. The feedback values for voltage</p></li>
<li><p><strong>idq0SP</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The controller output for the current calculation in the ABC
frame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.Controller.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/openmodelica_microgrid_gym/auxiliaries/inverter_contollers.html#Controller.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.Controller.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the controller to initialization state. Must be called before usage.</p>
</dd></dl>

<dl class="method">
<dt id="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.Controller.step">
<code class="sig-name descname">step</code><span class="sig-paren">(</span><em class="sig-param">currentCV</em>, <em class="sig-param">voltageCV</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/openmodelica_microgrid_gym/auxiliaries/inverter_contollers.html#Controller.step"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.Controller.step" title="Permalink to this definition">¶</a></dt>
<dd><p>Will call self.control() with the given *args and **kwargs and handle undersampling.
The function will replay the last control action for the duration of the undersampling.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>currentCV</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 1d-array with 3 entries, one for each phase. The feedback values for current</p></li>
<li><p><strong>voltageCV</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 1d-array with 3 entries, one for each phase. The feedback values for voltage</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>most up to date control action</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.CurrentCtl">
<em class="property">class </em><code class="sig-prename descclassname">openmodelica_microgrid_gym.auxiliaries.inverter_contollers.</code><code class="sig-name descname">CurrentCtl</code><span class="sig-paren">(</span><em class="sig-param">IPIParams</em>, <em class="sig-param">pllPIParams</em>, <em class="sig-param">tau</em>, <em class="sig-param">i_limit</em>, <em class="sig-param">Pdroop_param</em>, <em class="sig-param">Qdroop_param</em>, <em class="sig-param">undersampling=1</em>, <em class="sig-param">history=&lt;openmodelica_microgrid_gym.env.recorder.SingleHistory object&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/openmodelica_microgrid_gym/auxiliaries/inverter_contollers.html#CurrentCtl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.CurrentCtl" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.Controller" title="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.Controller"><code class="xref py py-class docutils literal notranslate"><span class="pre">openmodelica_microgrid_gym.auxiliaries.inverter_contollers.Controller</span></code></a></p>
<p>Defines the controller for a current sourcing inverter (Slave)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>IPIParams</strong> (<a class="reference internal" href="omg.auxiliaries.params.html#openmodelica_microgrid_gym.auxiliaries.params.PI_params" title="openmodelica_microgrid_gym.auxiliaries.params.PI_params"><code class="xref py py-class docutils literal notranslate"><span class="pre">PI_params</span></code></a>) – PI_parameter for the current control loop</p></li>
<li><p><strong>pllPIParams</strong> (<a class="reference internal" href="omg.auxiliaries.params.html#openmodelica_microgrid_gym.auxiliaries.params.PLLParams" title="openmodelica_microgrid_gym.auxiliaries.params.PLLParams"><code class="xref py py-class docutils literal notranslate"><span class="pre">PLLParams</span></code></a>) – PI parameters for the PLL controller</p></li>
<li><p><strong>tau</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – sampling time</p></li>
<li><p><strong>i_limit</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Current limit</p></li>
<li><p><strong>Pdroop_param</strong> (<a class="reference internal" href="omg.auxiliaries.params.html#openmodelica_microgrid_gym.auxiliaries.params.InverseDroopParams" title="openmodelica_microgrid_gym.auxiliaries.params.InverseDroopParams"><code class="xref py py-class docutils literal notranslate"><span class="pre">InverseDroopParams</span></code></a>) – Droop parameters for P-droop</p></li>
<li><p><strong>Qdroop_param</strong> (<a class="reference internal" href="omg.auxiliaries.params.html#openmodelica_microgrid_gym.auxiliaries.params.InverseDroopParams" title="openmodelica_microgrid_gym.auxiliaries.params.InverseDroopParams"><code class="xref py py-class docutils literal notranslate"><span class="pre">InverseDroopParams</span></code></a>) – Droop parameters for Q-droop</p></li>
<li><p><strong>undersampling</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Control is applied every undersmpling* cycles</p></li>
<li><p><strong>history</strong> – Dataframe to store internal data</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.CurrentCtl.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/openmodelica_microgrid_gym/auxiliaries/inverter_contollers.html#CurrentCtl.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.CurrentCtl.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the controller to initialization state. Must be called before usage.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.MultiPhaseABCPIPIController">
<em class="property">class </em><code class="sig-prename descclassname">openmodelica_microgrid_gym.auxiliaries.inverter_contollers.</code><code class="sig-name descname">MultiPhaseABCPIPIController</code><span class="sig-paren">(</span><em class="sig-param">VPIParams</em>, <em class="sig-param">IPIParams</em>, <em class="sig-param">tau</em>, <em class="sig-param">Pdroop_param</em>, <em class="sig-param">Qdroop_param</em>, <em class="sig-param">undersampling=1</em>, <em class="sig-param">history=&lt;openmodelica_microgrid_gym.env.recorder.SingleHistory object&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/openmodelica_microgrid_gym/auxiliaries/inverter_contollers.html#MultiPhaseABCPIPIController"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.MultiPhaseABCPIPIController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.VoltageCtl" title="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.VoltageCtl"><code class="xref py py-class docutils literal notranslate"><span class="pre">openmodelica_microgrid_gym.auxiliaries.inverter_contollers.VoltageCtl</span></code></a></p>
<p>Implements a discrete multiphase PI-PI voltage forming control with current
limiting in ABC. Has its own internal oscillator to keep track of the internal angle</p>
<p>Controls each phase individually in the abc axis.</p>
<p>Defines the controller for a voltage forming inverter (Master)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>VPIParams</strong> (<a class="reference internal" href="omg.auxiliaries.params.html#openmodelica_microgrid_gym.auxiliaries.params.PI_params" title="openmodelica_microgrid_gym.auxiliaries.params.PI_params"><code class="xref py py-class docutils literal notranslate"><span class="pre">PI_params</span></code></a>) – PI parameters for the voltage control loop</p></li>
<li><p><strong>IPIParams</strong> (<a class="reference internal" href="omg.auxiliaries.params.html#openmodelica_microgrid_gym.auxiliaries.params.PI_params" title="openmodelica_microgrid_gym.auxiliaries.params.PI_params"><code class="xref py py-class docutils literal notranslate"><span class="pre">PI_params</span></code></a>) – PI_parameter for the current control loop</p></li>
<li><p><strong>tau</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – sampling time</p></li>
<li><p><strong>Pdroop_param</strong> (<a class="reference internal" href="omg.auxiliaries.params.html#openmodelica_microgrid_gym.auxiliaries.params.DroopParams" title="openmodelica_microgrid_gym.auxiliaries.params.DroopParams"><code class="xref py py-class docutils literal notranslate"><span class="pre">DroopParams</span></code></a>) – Droop parameters for P-droop</p></li>
<li><p><strong>Qdroop_param</strong> (<a class="reference internal" href="omg.auxiliaries.params.html#openmodelica_microgrid_gym.auxiliaries.params.DroopParams" title="openmodelica_microgrid_gym.auxiliaries.params.DroopParams"><code class="xref py py-class docutils literal notranslate"><span class="pre">DroopParams</span></code></a>) – Droop parameters for Q-droop</p></li>
<li><p><strong>undersampling</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Control is applied every undersmpling* cycles</p></li>
<li><p><strong>history</strong> (<a class="reference internal" href="omg.env.recorder.html#openmodelica_microgrid_gym.env.recorder.EmptyHistory" title="openmodelica_microgrid_gym.env.recorder.EmptyHistory"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmptyHistory</span></code></a>) – Dataframe to store internal data</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.MultiPhaseABCPIPIController.control">
<code class="sig-name descname">control</code><span class="sig-paren">(</span><em class="sig-param">currentCV</em>, <em class="sig-param">voltageCV</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/openmodelica_microgrid_gym/auxiliaries/inverter_contollers.html#MultiPhaseABCPIPIController.control"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.MultiPhaseABCPIPIController.control" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs the calculations for a discrete step of the controller</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>currentCV</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 1d-array with 3 entries, one for each phase. The feedback values for current</p></li>
<li><p><strong>voltageCV</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 1d-array with 3 entries, one for each phase. The feedback values for voltage</p></li>
<li><p><strong>idq0SP</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The controller output for the current calculation in the ABC
frame</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.MultiPhaseDQ0PIPIController">
<em class="property">class </em><code class="sig-prename descclassname">openmodelica_microgrid_gym.auxiliaries.inverter_contollers.</code><code class="sig-name descname">MultiPhaseDQ0PIPIController</code><span class="sig-paren">(</span><em class="sig-param">VPIParams</em>, <em class="sig-param">IPIParams</em>, <em class="sig-param">tau</em>, <em class="sig-param">Pdroop_param</em>, <em class="sig-param">Qdroop_param</em>, <em class="sig-param">undersampling=1</em>, <em class="sig-param">history=&lt;openmodelica_microgrid_gym.env.recorder.SingleHistory object&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/openmodelica_microgrid_gym/auxiliaries/inverter_contollers.html#MultiPhaseDQ0PIPIController"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.MultiPhaseDQ0PIPIController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.VoltageCtl" title="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.VoltageCtl"><code class="xref py py-class docutils literal notranslate"><span class="pre">openmodelica_microgrid_gym.auxiliaries.inverter_contollers.VoltageCtl</span></code></a></p>
<p>Implements a discrete multiphase PI-PI voltage forming control with current
limiting. Has its own internal oscillator to keep track of the internal angle.</p>
<p>Controls each phase individualy in the dq0 axis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>VPIParams</strong> (<a class="reference internal" href="omg.auxiliaries.params.html#openmodelica_microgrid_gym.auxiliaries.params.PI_params" title="openmodelica_microgrid_gym.auxiliaries.params.PI_params"><code class="xref py py-class docutils literal notranslate"><span class="pre">PI_params</span></code></a>) – PI parameters for the voltage control loop</p></li>
<li><p><strong>IPIParams</strong> (<a class="reference internal" href="omg.auxiliaries.params.html#openmodelica_microgrid_gym.auxiliaries.params.PI_params" title="openmodelica_microgrid_gym.auxiliaries.params.PI_params"><code class="xref py py-class docutils literal notranslate"><span class="pre">PI_params</span></code></a>) – PI_parameter for the current control loop</p></li>
<li><p><strong>tau</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – sampling time</p></li>
<li><p><strong>Pdroop_param</strong> (<a class="reference internal" href="omg.auxiliaries.params.html#openmodelica_microgrid_gym.auxiliaries.params.DroopParams" title="openmodelica_microgrid_gym.auxiliaries.params.DroopParams"><code class="xref py py-class docutils literal notranslate"><span class="pre">DroopParams</span></code></a>) – Droop parameters for P-droop</p></li>
<li><p><strong>Qdroop_param</strong> (<a class="reference internal" href="omg.auxiliaries.params.html#openmodelica_microgrid_gym.auxiliaries.params.DroopParams" title="openmodelica_microgrid_gym.auxiliaries.params.DroopParams"><code class="xref py py-class docutils literal notranslate"><span class="pre">DroopParams</span></code></a>) – Droop parameters for Q-droop</p></li>
<li><p><strong>undersampling</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Control is applied every undersmpling* cycles</p></li>
<li><p><strong>history</strong> (<a class="reference internal" href="omg.env.recorder.html#openmodelica_microgrid_gym.env.recorder.EmptyHistory" title="openmodelica_microgrid_gym.env.recorder.EmptyHistory"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmptyHistory</span></code></a>) – Dataframe to store internal data</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.MultiPhaseDQ0PIPIController.control">
<code class="sig-name descname">control</code><span class="sig-paren">(</span><em class="sig-param">currentCV</em>, <em class="sig-param">voltageCV</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/openmodelica_microgrid_gym/auxiliaries/inverter_contollers.html#MultiPhaseDQ0PIPIController.control"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.MultiPhaseDQ0PIPIController.control" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs the calculations for a discrete step of the controller</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>currentCV</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 1d-array with 3 entries, one for each phase in abc. The feedback values for current</p></li>
<li><p><strong>voltageCV</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 1d-array with 3 entries, one for each phase in abc. The feedback values for voltage</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Modulation index for the inverter in abc</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.MultiPhaseDQCurrentController">
<em class="property">class </em><code class="sig-prename descclassname">openmodelica_microgrid_gym.auxiliaries.inverter_contollers.</code><code class="sig-name descname">MultiPhaseDQCurrentController</code><span class="sig-paren">(</span><em class="sig-param">IPIParams</em>, <em class="sig-param">pllPIParams</em>, <em class="sig-param">tau</em>, <em class="sig-param">i_limit</em>, <em class="sig-param">Pdroop_param</em>, <em class="sig-param">Qdroop_param</em>, <em class="sig-param">lower_droop_voltage_threshold=150.0</em>, <em class="sig-param">undersampling=1</em>, <em class="sig-param">history=&lt;openmodelica_microgrid_gym.env.recorder.SingleHistory object&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/openmodelica_microgrid_gym/auxiliaries/inverter_contollers.html#MultiPhaseDQCurrentController"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.MultiPhaseDQCurrentController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.CurrentCtl" title="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.CurrentCtl"><code class="xref py py-class docutils literal notranslate"><span class="pre">openmodelica_microgrid_gym.auxiliaries.inverter_contollers.CurrentCtl</span></code></a></p>
<p>Implements a discrete 3-phase current sourcing inverter, using a PLL to
keep track of the external phase angle</p>
<p>Controls the currents dq0 axis, aligned to the external voltage vector,
d-axis is aligned with the A phase. Rotating frame aligned with A axis at #
t = 0, that is, at t = 0, the d-axis is aligned with the a-axis.</p>
<p>DOES NOT wait for PLL lock before activating</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>IPIParams</strong> (<a class="reference internal" href="omg.auxiliaries.params.html#openmodelica_microgrid_gym.auxiliaries.params.PI_params" title="openmodelica_microgrid_gym.auxiliaries.params.PI_params"><code class="xref py py-class docutils literal notranslate"><span class="pre">PI_params</span></code></a>) – PI_parameter for the current control loop</p></li>
<li><p><strong>pllPIParams</strong> (<a class="reference internal" href="omg.auxiliaries.params.html#openmodelica_microgrid_gym.auxiliaries.params.PLLParams" title="openmodelica_microgrid_gym.auxiliaries.params.PLLParams"><code class="xref py py-class docutils literal notranslate"><span class="pre">PLLParams</span></code></a>) – PI parameters for the PLL controller</p></li>
<li><p><strong>tau</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – sampling time</p></li>
<li><p><strong>i_limit</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Current limit</p></li>
<li><p><strong>Pdroop_param</strong> (<a class="reference internal" href="omg.auxiliaries.params.html#openmodelica_microgrid_gym.auxiliaries.params.InverseDroopParams" title="openmodelica_microgrid_gym.auxiliaries.params.InverseDroopParams"><code class="xref py py-class docutils literal notranslate"><span class="pre">InverseDroopParams</span></code></a>) – Droop parameters for P-droop</p></li>
<li><p><strong>Qdroop_param</strong> (<a class="reference internal" href="omg.auxiliaries.params.html#openmodelica_microgrid_gym.auxiliaries.params.InverseDroopParams" title="openmodelica_microgrid_gym.auxiliaries.params.InverseDroopParams"><code class="xref py py-class docutils literal notranslate"><span class="pre">InverseDroopParams</span></code></a>) – Droop parameters for Q-droop</p></li>
<li><p><strong>lower_droop_voltage_threshold</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Grid voltage threshold from where the controller starts to react on the
voltage and frequency in the grid</p></li>
<li><p><strong>undersampling</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Control is applied every undersmpling* cycles
:param history: Dataframe to store internal data</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.MultiPhaseDQCurrentController.control">
<code class="sig-name descname">control</code><span class="sig-paren">(</span><em class="sig-param">currentCV</em>, <em class="sig-param">voltageCV</em>, <em class="sig-param">idq0SP=array([0.</em>, <em class="sig-param">0.</em>, <em class="sig-param">0.])</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/openmodelica_microgrid_gym/auxiliaries/inverter_contollers.html#MultiPhaseDQCurrentController.control"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.MultiPhaseDQCurrentController.control" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs the calculations for a discrete step of the controller
Droop-control is started if Vgrid_rms exceeds 200 V, to avoid oscillation with the grid forming inverter</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>currentCV</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 1d-array with 3 entries, one for each phase. The feedback values for current</p></li>
<li><p><strong>voltageCV</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 1d-array with 3 entries, one for each phase. The feedback values for voltage</p></li>
<li><p><strong>idq0SP</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – The peak current setpoints in the dq0 frame (Additional power output to droop, if == 0, than
only droop is applied</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Modulation indices for the current sourcing inverter in ABC</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.MultiPhaseDQCurrentSourcingController">
<em class="property">class </em><code class="sig-prename descclassname">openmodelica_microgrid_gym.auxiliaries.inverter_contollers.</code><code class="sig-name descname">MultiPhaseDQCurrentSourcingController</code><span class="sig-paren">(</span><em class="sig-param">IPIParams</em>, <em class="sig-param">tau</em>, <em class="sig-param">PdroopParams</em>, <em class="sig-param">QdroopParams</em>, <em class="sig-param">undersampling=1</em>, <em class="sig-param">history=&lt;openmodelica_microgrid_gym.env.recorder.SingleHistory object&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/openmodelica_microgrid_gym/auxiliaries/inverter_contollers.html#MultiPhaseDQCurrentSourcingController"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.MultiPhaseDQCurrentSourcingController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.VoltageCtl" title="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.VoltageCtl"><code class="xref py py-class docutils literal notranslate"><span class="pre">openmodelica_microgrid_gym.auxiliaries.inverter_contollers.VoltageCtl</span></code></a></p>
<p>Implements a discrete multiphase PI current controler to supply an amount of current to a load / the grid which can
be chosen via state”extension” using idq0SP
Has its own internal oscillator to keep track of the internal angle.
Due to it is the only inverter to supply the load, it inherits from the voltage controller but sets the parameters
of VPIParams to zero to not implement the voltage controler but uses the there defined (“direct”)Droop (e.g.
frequency drop due to loaded.</p>
<p>Controls each phase individualy in the dq0 axis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>IPIParams</strong> (<a class="reference internal" href="omg.auxiliaries.html#openmodelica_microgrid_gym.auxiliaries.PI_params" title="openmodelica_microgrid_gym.auxiliaries.PI_params"><em>PI_params</em></a>) – PI_parameter for the current control loop</p></li>
<li><p><strong>tau</strong> (<em>float</em>) – sampling time</p></li>
<li><p><strong>PdroopParams</strong> (<a class="reference internal" href="omg.auxiliaries.html#openmodelica_microgrid_gym.auxiliaries.DroopParams" title="openmodelica_microgrid_gym.auxiliaries.DroopParams"><em>DroopParams</em></a>) – Droop parameters for P-droop</p></li>
<li><p><strong>QdroopParams</strong> (<a class="reference internal" href="omg.auxiliaries.html#openmodelica_microgrid_gym.auxiliaries.DroopParams" title="openmodelica_microgrid_gym.auxiliaries.DroopParams"><em>DroopParams</em></a>) – Droop parameters for Q-droop</p></li>
<li><p><strong>undersampling</strong> (<em>int</em>) – Control is applied every undersmpling* cycles</p></li>
<li><p><strong>history</strong> (<a class="reference internal" href="omg.env.recorder.html#openmodelica_microgrid_gym.env.recorder.EmptyHistory" title="openmodelica_microgrid_gym.env.recorder.EmptyHistory"><em>EmptyHistory</em></a><em> or </em><a class="reference internal" href="omg.env.recorder.html#openmodelica_microgrid_gym.env.recorder.SingleHistory" title="openmodelica_microgrid_gym.env.recorder.SingleHistory"><em>SingleHistory</em></a><em> or </em><a class="reference internal" href="omg.env.recorder.html#openmodelica_microgrid_gym.env.recorder.FullHistory" title="openmodelica_microgrid_gym.env.recorder.FullHistory"><em>FullHistory</em></a>) – Dataframe to store internal data</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.MultiPhaseDQCurrentSourcingController.control">
<code class="sig-name descname">control</code><span class="sig-paren">(</span><em class="sig-param">currentCV</em>, <em class="sig-param">voltageCV</em>, <em class="sig-param">idq0SP=array([0.</em>, <em class="sig-param">0.</em>, <em class="sig-param">0.])</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/openmodelica_microgrid_gym/auxiliaries/inverter_contollers.html#MultiPhaseDQCurrentSourcingController.control"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.MultiPhaseDQCurrentSourcingController.control" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs the calculations for a discrete step of the controller</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>currentCV</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 1d-array with 3 entries, one for each phase in abc. The feedback values for current</p></li>
<li><p><strong>voltageCV</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 1d-array with 3 entries, one for each phase in abc. The feedback values for voltage</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Modulation index for the inverter in abc</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="data">
<dt id="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.N_PHASE">
<code class="sig-prename descclassname">openmodelica_microgrid_gym.auxiliaries.inverter_contollers.</code><code class="sig-name descname">N_PHASE</code><em class="property"> = 3</em><a class="headerlink" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.N_PHASE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.VoltageCtl">
<em class="property">class </em><code class="sig-prename descclassname">openmodelica_microgrid_gym.auxiliaries.inverter_contollers.</code><code class="sig-name descname">VoltageCtl</code><span class="sig-paren">(</span><em class="sig-param">VPIParams</em>, <em class="sig-param">IPIParams</em>, <em class="sig-param">tau</em>, <em class="sig-param">Pdroop_param</em>, <em class="sig-param">Qdroop_param</em>, <em class="sig-param">undersampling=1</em>, <em class="sig-param">history=&lt;openmodelica_microgrid_gym.env.recorder.SingleHistory object&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/openmodelica_microgrid_gym/auxiliaries/inverter_contollers.html#VoltageCtl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.VoltageCtl" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.Controller" title="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.Controller"><code class="xref py py-class docutils literal notranslate"><span class="pre">openmodelica_microgrid_gym.auxiliaries.inverter_contollers.Controller</span></code></a></p>
<p>Defines the controller for a voltage forming inverter (Master)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>VPIParams</strong> (<a class="reference internal" href="omg.auxiliaries.params.html#openmodelica_microgrid_gym.auxiliaries.params.PI_params" title="openmodelica_microgrid_gym.auxiliaries.params.PI_params"><code class="xref py py-class docutils literal notranslate"><span class="pre">PI_params</span></code></a>) – PI parameters for the voltage control loop</p></li>
<li><p><strong>IPIParams</strong> (<a class="reference internal" href="omg.auxiliaries.params.html#openmodelica_microgrid_gym.auxiliaries.params.PI_params" title="openmodelica_microgrid_gym.auxiliaries.params.PI_params"><code class="xref py py-class docutils literal notranslate"><span class="pre">PI_params</span></code></a>) – PI_parameter for the current control loop</p></li>
<li><p><strong>tau</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – sampling time</p></li>
<li><p><strong>Pdroop_param</strong> (<a class="reference internal" href="omg.auxiliaries.params.html#openmodelica_microgrid_gym.auxiliaries.params.DroopParams" title="openmodelica_microgrid_gym.auxiliaries.params.DroopParams"><code class="xref py py-class docutils literal notranslate"><span class="pre">DroopParams</span></code></a>) – Droop parameters for P-droop</p></li>
<li><p><strong>Qdroop_param</strong> (<a class="reference internal" href="omg.auxiliaries.params.html#openmodelica_microgrid_gym.auxiliaries.params.DroopParams" title="openmodelica_microgrid_gym.auxiliaries.params.DroopParams"><code class="xref py py-class docutils literal notranslate"><span class="pre">DroopParams</span></code></a>) – Droop parameters for Q-droop</p></li>
<li><p><strong>undersampling</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Control is applied every undersmpling* cycles</p></li>
<li><p><strong>history</strong> (<a class="reference internal" href="omg.env.recorder.html#openmodelica_microgrid_gym.env.recorder.EmptyHistory" title="openmodelica_microgrid_gym.env.recorder.EmptyHistory"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmptyHistory</span></code></a>) – Dataframe to store internal data</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="openmodelica_microgrid_gym.auxiliaries.inverter_contollers.VoltageCtl.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/openmodelica_microgrid_gym/auxiliaries/inverter_contollers.html#VoltageCtl.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#openmodelica_microgrid_gym.auxiliaries.inverter_contollers.VoltageCtl.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the controller to initialization state. Must be called before usage.</p>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="omg.auxiliaries.filter.html" class="btn btn-neutral float-right" title="omg.auxiliaries.filter" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="omg.auxiliaries.base.html" class="btn btn-neutral float-left" title="omg.auxiliaries.base" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Bode, Heid, Wallscheid, Weber

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>